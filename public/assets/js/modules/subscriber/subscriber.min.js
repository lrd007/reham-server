$(document).on("click", ".post-or-schedule", function(){
    $val = $(this).val();
    $val == 1 ? $("#schedule").closest('.row').show() : $("#schedule").closest('.row').hide();
});

$(document).on("click", ".program-type", function(){
    $val = $(this).val();
    $val == 1 ? $(".offer-date").closest('.row').show() : $(".offer-date").closest('.row').hide();
});

$(document).on('change', ".program", function () {
    $id = $(this).val();
    $course = $(this).closest('.row').find("#course");
    $course.prop('disabled', true);
    $.ajax({
        type: 'GET',
        url: $baseUrl + '/course-by-program-ids?program_ids=' + $id,
        dataType: 'json',
        success: function (response) {

            $row = '<option value=""></option>';
            $teachers = '';
            if (response.status = 'success') {
                if (response.courses) {
                    $.each(response.courses, function (index, course) {
                        $row += '<option value="' + course.id + '">' + course.name + '</option >';
                    });
                }

                $course.html($row), $course.prop('disabled', false);
            }
        },
        error: function (error) {
            errorHandler(error);
        }
    });
});

$(document).on('change', ".course", function () {
    $id = $(this).val();
    $package = $(this).closest('.row').find("#package");
    $package.prop('disabled', true);
    $.ajax({
        type: 'GET',
        url: $baseUrl + '/package-by-course-ids?course_ids=' + $id,
        dataType: 'json',
        success: function (response) {

            $row = '<option value=""></option>';
            $teachers = '';
            if (response.status = 'success') {
                if (response.packages) {
                    $.each(response.packages, function (index, package) {
                        $row += '<option value="' + package.id + '" data-days="'+ package.course_package.days +'">' + package.course_package.name + '</option >';
                    });
                }

                $package.html($row), $package.prop('disabled', false);
            }
        },
        error: function (error) {
            errorHandler(error);
        }
    });
});

$(document).on('change', ".package", function () {
    $days = $(this).find(':selected').data('days');

    $today = new Date();
    $startDate = $today.toISOString().split('T')[0];
    $(this).closest('.row').find('.start-date').val($startDate);

    $endDate = $today.setDate($today.getDate() + parseInt($days));
    $endDate = new Date($endDate);
    console.log($endDate);
    $endDate = $endDate.toISOString().split('T')[0];
    $(this).closest('.row').find('.end-date').val($endDate);
});

$("#addProgram").click(function(){
    $row = $('.program-container').html();
    $("#programContainer").append($row);
});

$(document).on('click', ".remove-program", function () {
    $(this).closest('.bg-light').remove();
});